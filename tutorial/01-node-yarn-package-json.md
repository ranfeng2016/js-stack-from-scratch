# 01 - Node, Yarn, å’Œ `package.json`

ä»£ç è¯·ç‚¹å‡» [è¿™é‡Œ](https://github.com/verekia/js-stack-walkthrough/tree/master/01-node-yarn-package-json).

åœ¨è¿™éƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†å®‰è£…Nodeï¼ŒYarnï¼Œ`package.json` æ–‡ä»¶, æ‰“æˆä¸€ä¸ªåŒ….

## Node

> ğŸ’¡ **[Node.js](https://nodejs.org/)** æ˜¯JavaScriptçš„è¿è¡Œç¯å¢ƒï¼Œå¤šç”¨äºåå°å¼€å‘ï¼Œä¹Ÿç”¨äºé€šç”¨è„šæœ¬ã€‚åœ¨å‰ç«¯ç¯å¢ƒï¼Œå®ƒå¯ä»¥æ‰§è¡Œä¸€ç³»åˆ—ä»»åŠ¡ï¼Œå¦‚ linting, æµ‹è¯•, å’Œé…ç½®æ–‡ä»¶ã€‚

æœ¬æ•™ç¨‹é‡Œæˆ‘ä»¬å°†ä½¿ç”¨nodeä½œä¸ºåŸºç¡€ï¼Œæ‰€ä»¥éœ€è¦å®‰è£…ã€‚å‰å¾€**macOS** æˆ–è€… **Windows**å¯¹åº”çš„[ä¸‹è½½ é¡µé¢](https://nodejs.org/en/download/current/) , æˆ–è€…Linuxå‘è¡Œç‰ˆçš„[åŒ…ç®¡ç†é…ç½®é¡µé¢](https://nodejs.org/en/download/package-manager/)ï¼Œè¿›è¡Œå®‰è£…ã€‚

æ¯”å¦‚ï¼Œåœ¨**Ubuntu / Debian**, æ‚¨å¯è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥å®‰è£…Node:

```sh
curl -sL https://deb.nodesource.com/setup_7.x | sudo -E bash -
sudo apt-get install -y nodejs
```

Nodeç‰ˆæœ¬éœ€è¦ > 6.5.0.

## NVM

å½“Nodeå®‰è£…å¥½å, å¦‚æœæ‚¨æƒ³è¦æ›´é«˜çš„çµæ´»æ€§, ä¸‹è½½ ([Node ç‰ˆæœ¬ç®¡ç†](https://github.com/creationix/nvm)), å®‰è£…NVMï¼Œä½¿ç”¨æœ€æ–°çš„Nodeç‰ˆæœ¬ã€‚

## NPM

NPM æ˜¯é»˜è®¤çš„NodeåŒ…ç®¡ç†å™¨ï¼Œè·ŸNodeä¸€èµ·è‡ªåŠ¨ä¸‹è½½ã€‚åŒ…ç®¡ç†å™¨ç”¨äºä¸‹è½½ç®¡ç†åŒ…ï¼ˆæ‚¨æˆ–è€…å…¶ä»–äººå†™çš„ä»£ç æ¨¡å—ï¼‰ã€‚åœ¨æœ¬æ•™ç¨‹é‡Œæˆ‘ä»¬ä¼šä½¿ç”¨åˆ°å¤§é‡çš„åŒ…ï¼Œæ‰€ä»¥æˆ‘ä¹ˆå¯ä½¿ç”¨Yarnï¼Œå¦ä¸€ç§åŒ…ç®¡ç†å™¨ã€‚

## Yarn

> ğŸ’¡ **[Yarn](https://yarnpkg.com/)**ä½œä¸ºNode.jsçš„åŒ…ç®¡ç†å™¨ï¼Œæ¯”NPMæ›´å¿«ï¼Œèƒ½ç¦»çº¿ç¼“å­˜ï¼Œåœ¨åŒ…çš„ç®¡ç†ä¸Š[æ›´å¯é ](https://yarnpkg.com/en/docs/yarn-lock)ã€‚

åœ¨2016å¹´10æœˆä»½ [å‘å¸ƒ](https://code.facebook.com/posts/1840075619545360)å, å®ƒè·å¾—äº†å¹¿æ³›çš„åº”ç”¨ï¼Œå¹¶ä¸”å¾ˆå¿«åœ°æˆä¸ºJavaScriptç¤¾åŒºçš„åŒ…ç®¡ç†çš„é€‰æ‹©ã€‚å¦‚æœæ‚¨æƒ³ä½¿ç”¨NPMï¼Œæ‚¨å¯ä»¥ç”¨`npm install --save` å’Œ `npm install --save-dev`å–ä»£æ‰€æœ‰çš„`yarn add` å’Œ `yarn add --dev` å‘½ä»¤è¡Œ ã€‚

é€šè¿‡ [è¯¥è¯´æ˜](https://yarnpkg.com/en/docs/install) åœ¨æ‚¨çš„ç³»ç»Ÿå®‰è£…Yarnã€‚å¦‚æœæ‚¨æ˜¯MacOSæˆ–è€…Unixï¼Œå»ºè®®ä½¿ç”¨*Alternatives*é€‰é¡¹å¡çš„çš„**å®‰è£…è„šæœ¬** , ä»¥ [é¿å…](https://github.com/yarnpkg/yarn/issues/1505) å®‰è£…å…¶ä»–åŒ…ç®¡ç†å™¨:

```sh
curl -o- -L https://yarnpkg.com/install.sh | bash
```

## `package.json`

> ğŸ’¡ **[package.json](https://yarnpkg.com/en/docs/package-json)** æ˜¯ç”¨äºæè¿°å’Œç»Ÿè®¡æ‚¨çš„JavaScripté¡¹ç›®çš„æ–‡ä»¶ã€‚å®ƒåŒ…å«äº†é€šç”¨ä¿¡æ¯ï¼ˆé¡¹ç›®åç§°ï¼Œç‰ˆæœ¬ï¼Œè´¡çŒ®è€…ä»¥åŠæ‰¹å‡†ç­‰ï¼‰ï¼Œå·¥å…·ä¿¡æ¯ï¼Œç”šè‡³è¿è¡Œ*ä»»åŠ¡*çš„å†…å®¹ã€‚ 

- æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹, `cd` è¿›å…¥ã€‚
- è¿è¡Œ`yarn init` ï¼Œå›ç­”é—®é¢˜`yarn init -y` è·³è¿‡æ‰€æœ‰é—®é¢˜), è‡ªåŠ¨ç”Ÿæˆä¸€ä»½ `package.json` æ–‡ä»¶ã€‚

è¿™é‡Œæ˜¯ä¸€ä»½æœ¬æ•™ç¨‹é‡Œä½¿ç”¨çš„`package.json`åŸºç¡€æ–‡ä»¶:

```json
{
  "name": "your-project",
  "version": "1.0.0",
  "license": "MIT"
}
```

## Hello World

- åˆ›å»º `index.js` æ–‡ä»¶ï¼Œè¿˜æœ‰ `console.log('Hello world')`

ğŸ æ­¤æ–‡ä»¶å¤¹ä¸‹è¿è¡Œ `node .` (`index.js` æ˜¯è¯¥æ–‡ä»¶å¤¹NodeæŸ¥æ‰¾æ–‡ä»¶). å®ƒå°†ä¼šè¾“å‡º "Hello world"ã€‚

**æ³¨é‡Š**: çœ‹åˆ° ğŸ æ——çš„æ ‡å¿—äº†ä¹ˆ? æ¯æ¬¡åˆ°è¾¾æ£€æŸ¥ç‚¹æ—¶ï¼Œæˆ‘éƒ½ä¼šä½¿ç”¨å®ƒã€‚æœ‰æ—¶ä¸€è¡Œä¼šè¿›è¡Œå¤§é‡æ›´æ”¹ï¼Œæ‚¨çš„ä»£ç å¯èƒ½æ— æ³•å·¥ä½œï¼Œç›´åˆ°åˆ°è¾¾ä¸‹ä¸€ä¸ªæ£€æŸ¥ç‚¹ã€‚

## `start` è„šæœ¬

è¿è¡Œ `node .`æ¥æ‰§è¡Œæˆ‘ä»¬çš„é¡¹ç›®æœ‰å†™ä½å±‚ã€‚å–è€Œä»£ä¹‹ï¼Œç”¨NPM/Yarnè§¦å‘ä»£ç æ‰§è¡Œã€‚å³ä½¿æˆ‘ä»¬çš„ä»£ç æ›´åŠ å¤æ‚ï¼Œä½¿ç”¨ `yarn start`ä¹Ÿèƒ½è¿è¡Œæ•´ä¸ªç¨‹åºã€‚

- åœ¨ `package.json`é‡Œ, æ·»åŠ  `scripts`å­—æ®µï¼Œå¦‚ä¸‹:

```json
{
  "name": "your-project",
  "version": "1.0.0",
  "license": "MIT",
  "scripts": {
    "start": "node ."
  }
}
```

`start` æ˜¯æˆ‘ä»¬ç»™å³å°†è¿è¡Œé¡¹ç›®çš„ä»»åŠ¡èµ·çš„åå­—ã€‚æˆ‘ä»¬å°†åœ¨`scripts` åˆ›å»ºä¸åŒçš„ä»»åŠ¡ã€‚å…¶ä»–åŒçº§ä»»åŠ¡çš„åå­—ä¸º`stop` å’Œ `test`ã€‚

`package.json` å¿…é¡»æ˜¯æœ‰æ•ˆçš„jsonæ–‡ä»¶,æ„å‘³ç€ä¸èƒ½ä»¥é€—å·ç»“å°¾ã€‚æ‰€ä»¥å½“ç¼–å†™`package.json` æ–‡ä»¶è¦å½“å¿ƒã€‚

ğŸ è¿è¡Œ `yarn start`. å®ƒå°†è¾“å‡º `Hello world`.

## Git å’Œ `.gitignore`

-  `git init`åˆå§‹åŒ–gitä»“åº“

- åˆ›å»º `.gitignore` æ–‡ä»¶å’Œæ·»åŠ å†…å®¹å¦‚ä¸‹:

```gitignore
.DS_Store
/*.log
```

`.DS_Store` æ˜¯åœ¨MacOsè‡ªåŠ¨ç”Ÿæˆçš„æ–‡ä»¶ï¼Œåœ¨æ‚¨çš„ä»“åº“æ˜¯æ²¡æœ‰çš„ã€‚

`npm-debug.log`å’Œ `yarn-error.log` æ˜¯å½“ä½ çš„åŒ…ç®¡ç†å™¨é‡åˆ°é”™è¯¯ç”Ÿæˆçš„ï¼Œæˆ‘ä»¬åœ¨ä»“åº“é‡Œå¹¶ä¸åƒè¦ã€‚

## å®‰è£…ä½¿ç”¨package

åœ¨è¿™éƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†å®‰è£…å’Œä½¿ç”¨åŒ…ã€‚æ¯ä¸ªâ€œpackageâ€æ˜¯åˆ«äººå†™çš„ä¸€æ®µä»£ç ï¼Œä½ å¯ä»¥ä½¿ç”¨è‡ªå·±çš„ä»£ç ã€‚å®ƒå¯ä»¥æ˜¯ä»»ä½•ä¸œè¥¿ï¼Œæˆ‘ä»¬å°†å°è¯•ä½¿ç”¨å¸®ä½ å¤„ç†é¢œè‰²çš„åŒ…ã€‚

-  é€šè¿‡è¿è¡Œ `yarn add color` å®‰è£… `color`çš„åŒ…

æ‰“å¼€ `package.json` ï¼Œå¯ä»¥çœ‹åˆ° `color` å·²ç»è‡ªåŠ¨åŠ å…¥åˆ° `dependencies`äº†ã€‚

ç›®å½•ä¸­å¤šäº†ä¸€ä¸ª`node_modules` æ–‡ä»¶å¤¹ï¼Œæ¥å­˜å‚¨åŒ…ã€‚

- æ·»åŠ  `node_modules/` åˆ°ä½ çš„ `.gitignore`

ä½ ä¼šæ³¨æ„åˆ°yarnç”Ÿæˆ`yarn.lock` æ–‡ä»¶. ä½ åº”è¯¥å°†å®ƒæäº¤åˆ°ä½ çš„ä»“åº“ï¼Œä¿è¯ä½ çš„å›¢é˜Ÿç”¨çš„éƒ½æ˜¯åŒä¸€ä¸ªç‰ˆæœ¬çš„åŒ…ã€‚å¦‚æœä½ ä½¿ç”¨NPMï¼Œ*shrinkwrap*ä»£è¡¨åŒæ ·çš„æ–‡ä»¶ã€‚

- å°†ä»¥ä¸‹çš„å†…å®¹å†™å…¥`index.js`æ–‡ä»¶:

```js
const color = require('color')

const redHexa = color({ r: 255, g: 0, b: 0 }).hex()

console.log(redHexa)
```

ğŸ è¿è¡Œ `yarn start`. å®ƒå°†è¾“å‡º `#FF0000`.

æ­å–œä½ ï¼ä½ å·²ç»å®‰è£…ä½¿ç”¨äº†åŒ…ã€‚

`color` åªæ˜¯æ•™ä½ å¦‚ä½•ä½¿ç”¨åŒ…ã€‚ ç°åœ¨æˆ‘ä»¬ä¸å†éœ€è¦å®ƒäº†ï¼Œå¯ä»¥è¿›è¡Œå¸è½½:

- è¿è¡Œ`yarn remove color`

## ä¸¤ç§ç±»å‹çš„ä¾èµ–

æœ‰ä¸¤ç§ä¸åŒç±»å‹çš„åŒ…ä¾èµ–ï¼š `"dependencies"` å’Œ `"devDependencies"`:

**Dependencies** æ˜¯ä½ çš„åŠŸèƒ½åº”ç”¨ï¼ˆReact, Redux, Lodash, jQueryç­‰ï¼‰çš„éœ€è¦åŒ…ã€‚å¯é€šè¿‡`yarn add [package]`æ¥å®‰è£…ã€‚

**Dev Dependencies**æ˜¯ç”¨åœ¨å¼€å‘æœŸé—´æˆ–è€…æ„å»ºä½ çš„åº”ç”¨ï¼ˆWebpack, SASS, linters, testing frameworksç­‰ï¼‰çš„åŒ…ã€‚ ä½ å¯ä»¥é€šè¿‡ `yarn add --dev [package]`æ¥å®‰è£…ã€‚

ä¸‹ä¸€ç« : [02 - Babel, ES6, ESLint, Flow, Jest, Husky](02-babel-es6-eslint-flow-jest-husky.md#readme)

å›åˆ° [ç›®å½•](https://github.com/verekia/js-stack-from-scratch#table-of-contents)ã€‚
